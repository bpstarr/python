<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Thoughts</title>
</head>
<body>
    <div class="container bg-info">
        <nav class = "d-flex justify-content-between align-items-center col-12">
            <h1 class = "text-center">Welcome {{users.first_name}}</h1>
            <div class = "d-flex col-5 justify-content-around">
                <a href="/logout" class = "btn btn-danger">logout</a>
            </div>
        </nav>
        <form action="/create/thought" method="post" class = "col-5">
            <div class = "col-5">
                <div class = "form-group">
                    <textarea type="textarea" name="thought" class = "form-control" placeholder="Post a thought here"></textarea>
                    <input type="submit" value = "Add thought" name="thought" class = "btn-success mt-3">
                </div>
            </div>
            {% with messages = get_flashed_messages() %}     <!-- declare a variable called messages -->
                {% if messages %}                            <!-- check if there are any messages -->
                    {% for message in messages %}            <!-- loop through the messages -->
                        <p>{{message}}</p>                   <!-- display each message in a paragraph tag -->
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </form>
            {% for thought in all_thoughts%}
            <div class = "border border-dark">
            <p class="bg-info col-5 pt-3"><a href = "/users/{{thought.creator.id}}" class = "text-warning"> {{thought.creator.first_name}}  </a> {{ thought.thought }}</p>
                    <form action="/like/{{thought.id}}" method="get" class = "col-5 bg-info pb-3">
                        <p> Likes: {{ thought.likes }}</p>
                        {% if thought.likes == 0 %}
                        <div class = "col-5">
                            <input type="submit" value = "like" name= "/like/id" class = "btn-success">
                        </div>
                    </form>
                        {% else %}
                    
                    <form action="/dislike/{{thought.id}}" method="get" class = "col-5 bg-info">
                        <div class = "col-5">
                            <input type="submit" value = "dislike" name="/unlike/{{ thought.id }}" class = "btn-success">
                        </div>
                    </form>
                    {% endif %}
                    {% if thought.creator.id == session['user_id'] %}
                    <a href="/destroy/thought/{{thought.id}}" class = "text-danger">Delete</a>
                    {% endif %}
                </div>
            {% endfor %}
    </div>
</body>
</html>